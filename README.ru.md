[English](README.md) | **Русский**

# JT - Jira Time Tracker

CLI для логирования времени в Jira через AI. Пишешь на естественном языке -- получаешь ворклоги.

## Установка

```bash
npm install -g jtw
```

## Быстрый старт

```bash
# Первичная настройка
jtw setup

# Быстрый лог через AI
jtw q "вчера созвоны 4 часа, PROJ-123 разработка 3ч"

# Интерактивный режим
jt

# Управление шаблонами
jtw t

# Управление алиасами
jtw a
```

## Возможности

- **AI-парсинг:** Естественный язык в структурированные ворклоги (Anthropic или OpenAI)
- **Алиасы:** Привязка активностей к задачам ("созвоны" -> PROJ-123). AI подбирает алиас по смыслу, а не по точному совпадению
- **Шаблоны:** Сохранение и повторное использование типовых записей
- **История:** Все логи сохраняются локально в SQLite
- **Периоды:** "неделю созвоны по 1.5ч" -- автоматически раскладывает на рабочие дни
- **Jira Server и Cloud:** Работает с on-premise и облачными инсталляциями

## Команды

| Команда | Описание |
|---------|----------|
| `jtw` | Интерактивное меню |
| `jtw setup` | Настройка Jira и AI |
| `jtw q "текст"` | Быстрый лог через AI |
| `jtw t` | Управление шаблонами |
| `jtw a` | Управление алиасами |

## Настройка

Все данные хранятся в `~/.jtw/data.db` (SQLite). Команда `jtw setup` настроит:

- URL Jira, логин, пароль
- Ключ проекта (например, PROJ)
- AI-провайдер (Anthropic / OpenAI) и API-ключ

## Примеры

```bash
# Простой лог
jtw q "сегодня стендап 30 минут"

# Несколько записей за раз
jtw q "вчера PROJ-123 разработка 6 часов, ревью 2 часа"

# AI сам подберет задачу по алиасу
# "созвоны" -> PROJ-123 (если алиас настроен)
jtw q "сегодня созвоны 2 часа"

# Период -- раскладывает по рабочим дням
jtw q "неделю созвоны каждый день по 1.5 часа"

# Относительные даты
jtw q "позавчера фикс багов 4ч"
```

## Требования

- Node.js 18+
- Доступ к Jira Server или Jira Cloud
- API-ключ Anthropic или OpenAI

## Troubleshooting

**better-sqlite3 не устанавливается:**
Пакет содержит нативную зависимость. Обычно prebuild скачивается автоматически. Если нет -- нужен C++ компилятор:
- macOS: `xcode-select --install`
- Ubuntu: `sudo apt install build-essential python3`
- Windows: `npm install -g windows-build-tools`

**Ошибка подключения к Jira:**
Проверьте VPN, URL и учетные данные: `jtw setup`

**Ошибка AI API:**
Проверьте API-ключ и баланс на аккаунте провайдера.

## Архитектура

```
src/
├── commands/      # CLI-команды (setup, quick, template, alias, log)
├── core/          # Ядро (store, jira, ai)
├── utils/         # Утилиты (display, menu)
├── types.ts       # TypeScript типы
└── index.ts       # Точка входа CLI
```

Минималистичный дизайн без сервисных слоев. SQLite для хранения. Типизированный Jira API через jira.js.

## Лицензия

MIT
